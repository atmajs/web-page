function __eval(t,e){"use strict";return e&&e.route.params,eval.call(window,t)}(function(t,e){"use strict";var n,r,i;"undefined"==typeof exports||t!==exports&&null!=t||(n=r=global),null==n&&(n="undefined"==typeof window?global:window),null==r&&(r=t||n),i=n.document,e(n,r,i)})(this,function(global,exports,document){"use strict";function fn_proxy(t,e){return function(){t.apply(e,arguments)}}function fn_doNothing(t){"function"==typeof t&&t()}function obj_inherit(t){"function"==typeof t&&(t=t.prototype);for(var e,n,r=1,i=arguments.length;i>r;r++){e="function"==typeof arguments[r]?arguments[r].prototype:arguments[r];for(n in e)t[n]=e[n]}return t}function arr_invoke(t,e,n){if(null!=t&&t instanceof Array!=!1)for(var r=0,i=t.length;i>r;r++)"function"==typeof t[r]&&(null==e?t[r].call(n):t[r].apply(n,e))}function arr_ensure(t,e){if(!e)return t;for(var n,r=e.split("."),i=r.length-1,o=0;i>o;o++)n=r[o],t=t[n]||(t[n]={});return n=r[i],t[n]||(t[n]=[])}function path_getDir(t){var e=t.lastIndexOf("/");return-1===e?"":t.substring(e+1,-e)}function path_resolveCurrent(){if(null==document)return"undefined"==typeof module?"":path_win32Normalize(module.parent.filename);var t=document.getElementsByTagName("script"),e=t[t.length-1],n=e&&e.getAttribute("src")||"";if("/"===n[0])return n;var r=window.location.pathname.replace(/\/[^\/]+\.\w+$/,"");return"/"!==r[r.length-1]&&(r+="/"),r+n}function path_win32Normalize(t){return t=t.replace(/\\/g,"/"),"file:"===t.substring(0,5)?t:"file:///"+t}function path_resolveUrl(t,e){switch(cfg.path&&"/"===t[0]&&(t=cfg.path+t.substring(1)),t.substring(0,5)){case"file:":case"http:":return t}for("./"===t.substring(0,2)&&(t=t.substring(2)),"/"===t[0]?(isWeb===!1||cfg.lockedToFolder===!0)&&(t=t.substring(1)):null!=e&&null!=e.location&&(t=e.location+t);-1!==t.indexOf("../");)t=t.replace(reg_subFolder,"");return t}function path_isRelative(t){var e=t.charCodeAt(0);switch(e){case 47:return!1;case 102:case 104:return/^file:|https?:/.test(t)===!1}return!0}function path_getExtension(t){var e=t.indexOf("?");return-1===e?t.substring(t.lastIndexOf(".")+1):t.substring(t.lastIndexOf(".",e)+1,e)}var bin={},isWeb=!!(global.location&&global.location.protocol&&/^https?:/.test(global.location.protocol)),reg_subFolder=/([^\/]+\/)?\.\.\//,cfg={path:null,loader:null,version:null,lockedToFolder:null,sync:null,eval:null==document},handler={},hasOwnProp={}.hasOwnProperty,emptyResponse={load:{}},__array_slice=Array.prototype.slice,XMLHttpRequest=global.XMLHttpRequest,Helper={reportError:function(t){console.error("IncludeJS Error:",t,t.message,t.url),"function"==typeof handler.onerror&&handler.onerror(t)}},XHR=function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&e&&e(t,n.responseText)},n.open("GET","object"==typeof t?t.url:t,!0),n.send()},RoutesLib=function(){var t={},e=/([^\\\/]+)\.\w+$/;return{register:function(e,n,r){if("string"==typeof n&&path_isRelative(n)){var i=r||include,o=i.location||path_getDir(i.url||path_resolveCurrent());path_isRelative(o)&&(o="/"+o),n=o+n}t[e]=n instanceof Array?n:n.split(/[\{\}]/g)},resolve:function(e,n){var r,i,o,u,s,l,a,c,f=n.indexOf("?"),h=n.indexOf("::");if(-1!==h&&(r=n.substring(h+2),n=n.substring(0,h)),-1!==f){for(c=n.substring(f+1).split("&"),o={},s=0,a=c.length;a>s;s++)l=c[s].split("="),o[l[0]]=l[1];n=n.substring(0,f)}if(n=n.split("/"),u=t[e],null==u)return{path:n.join("/"),params:o,alias:r};for(i=u[0],s=1;u.length>s;s++)if(0===s%2)i+=u[s];else{var p=u[s]<<0;if(p>n.length-1&&(p=n.length-1),i+=n[p],s===u.length-2)for(p++;n.length>p;p++)i+="/"+n[p]}return{path:i,params:o,alias:r}},each:function(t,e,n,r,i){var o;if(null!=e)if("lazy"!==t||null!=i)if(e instanceof Array)for(var u=0;e.length>u;u++)this.each(t,e[u],n,r,i);else if("object"!=typeof e){if("string"==typeof e){var s=this.resolve(r,e);return r&&(r+="."+e),n(r,s,i),void 0}console.error("Include Package is invalid",arguments)}else for(o in e)hasOwnProp.call(e,o)&&this.each(t,e[o],n,o,i);else for(o in e)this.each(t,e[o],n,null,o)},getRoutes:function(){return t},parseAlias:function(t){var n=t.path,r=e.exec(n);return r&&r[1]}}},Routes=RoutesLib(),Events=function(t){function e(){Events.ready=fn_doNothing,null!=n&&(arr_invoke(n),n=null)}if(null==t)return{ready:fn_doNothing,load:fn_doNothing};var n=[];return"onreadystatechange"in t?t.onreadystatechange=function(){/complete|interactive/g.test(t.readyState)!==!1&&e()}:t.addEventListener?t.addEventListener("DOMContentLoaded",e):window.onload=e,{ready:function(t){n.unshift(t)}}}(document),ScriptStack=function(){function t(t,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,"onreadystatechange"in n?n.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&e()}:n.onload=n.onerror=e,(i||(i=document.getElementsByTagName("head")[0])).appendChild(n)}function e(){function n(t){t&&"error"===t.type&&console.log("Script Loaded Error",i.url);for(var n=0,r=s.length;r>n;n++)if(s[n]===i){s.splice(n,1);break}return n===r?(console.error("Loaded Resource not found in stack",i),void 0):(i.readystatechanged(3),o=null,e(),void 0)}if(!u){if(0===s.length)return r(),void 0;if(null==o){var i=o=s[0];if(1!==i.state)return i.state=1,global.include=i,global.iparams=i.route.params,i.source?(__eval(i.source,i),n(),void 0):(t(i.url,n),void 0)}}}function n(){if(!u){if(0===s.length)return r(),void 0;if(null==o){var t=s[0];if(!(2>t.state)){o=t,t.state=1,global.include=t,__eval(t.source,t);for(var e,i=0,l=s.length;l>i;i++)if(e=s[i],e===t){s.splice(i,1);break}t.readystatechanged(3),o=null,n()}}}}function r(){for(var t=-1,e=l.length;e>++t;)l[t]();l.length=0}var i,o,u,s=[],l=[];return{load:function(t,r,i){var o=!1;if(r)for(var u=0,l=s.length;l>u;u++)if(s[u]===r){s.splice(u,0,t),o=!0;break}return o||s.push(t),!cfg.eval||i?(e(),void 0):t.source?(t.state=2,n(),void 0):(XHR(t,function(t,e){e||console.error("Not Loaded:",t.url),t.source=e,t.state=2,n()}),void 0)},moveToParent:function(t,e){var n,r=s.length,i=-1,o=-1;for(n=0;r>n;n++)if(s[n]===t){o=n;break}if(-1!==o){for(n=0;r>n;n++)if(s[n]===e){i=n;break}-1!==i&&(i>o||(s.splice(o,1),s.splice(i,0,t)))}},pause:function(){u=!0},resume:function(){if(u=!1,null==o){var t=cfg.eval?n:e;t()}},complete:function(t){return u===!1&&0===s.length?(t(),void 0):(l.push(t),void 0)}}}(),IncludeDeferred=function(){this.callbacks=[],this.state=-1};IncludeDeferred.prototype={on:function(t,e,n){if(this===n&&-1===this.state)return e(this),this;var r=3>this.state||this===n?"unshift":"push";return this.state>=t?e(this):this.callbacks[r]({state:t,callback:e}),this},readystatechanged:function(t){var e,n,r,i;if(t>this.state&&(this.state=t),3===this.state){var o=this.includes;if(null!=o&&o.length)for(e=0;o.length>e;e++)if(4!==o[e].resource.state)return;this.state=4}if(e=0,n=this.callbacks.length,0!==n){for("js"===this.type&&4===this.state&&(i=global.include,global.include=this);n>e&&(r=this.callbacks[e],null==r||r.state>this.state||(this.callbacks.splice(e,1),n--,e--,r.callback(this),!(4>this.state)));e++);null!=i&&(global.include=i)}},ready:function(t){var e=this;return this.on(4,function(){Events.ready(function(){e.resolve(t)})},this)},done:function(t){var e=this;return this.on(4,function(){e.resolve(t)},this)},resolve:function(t){var e=this.includes,n=null==e?0:e.length;if(n>0&&null==this.response){this.response={};for(var r,i,o,u=0;n>u;u++)if(o=e[u],r=o.resource,i=o.route,void 0!==r.exports){var s=r.type;switch(s){case"js":case"load":case"ajax":var l=i.alias||Routes.parseAlias(i),a="js"===s?this.response:this.response[s]||(this.response[s]={});if(l){a[l]=r.exports;break}console.warn("Resource Alias is Not defined",r)}}}t(this.response||emptyResponse)}};var Include=function(IncludeDeferred){function Include(){IncludeDeferred.call(this)}function embedPlugin(source){eval(source)}function enableModules(){return Object.defineProperty===void 0?(console.warn("Browser do not support Object.defineProperty"),void 0):(Object.defineProperty(global,"module",{get:function(){return global.include}}),Object.defineProperty(global,"exports",{get:function(){var t=global.include;return t.exports||(t.exports={})},set:function(t){global.include.exports=t}}),void 0)}function includePackage(t,e,n){var r=1===n.length?n[0]:__array_slice.call(n);return t instanceof Resource?t.include(e,r):new Resource("js").include(e,r)}function createIncluder(t){return function(){return includePackage(this,t,arguments)}}function doNothing(){return this}function stub_freeze(t){t.js=t.css=t.load=t.ajax=t.embed=t.lazy=t.inject=doNothing}function stub_release(t){for(var e=["js","css","load","ajax","embed","lazy"],n=e.length;-1!==--n;)t[e[n]]=createIncluder(e[n]);t.inject=t.js}return stub_release(Include.prototype),obj_inherit(Include,IncludeDeferred,{setCurrent:function(t){var e=new Resource("js",{path:t.id},t.namespace,null,null,t.id);4!==e.state&&console.error("<include> Resource should be loaded",t),e.state=3,global.include=e},cfg:function(t){switch(typeof t){case"object":var e,n;for(e in t)switch(n=t[e],e){case"loader":for(var r in n)CustomLoader.register(r,n[r]);break;case"modules":n===!0&&enableModules();break;default:cfg[e]=n}break;case"string":if(1===arguments.length)return cfg[t];2===arguments.length&&(cfg[t]=arguments[1]);break;case"undefined":return cfg}return this},routes:function(t){if(null==t)return Routes.getRoutes();if(2===arguments.length)return Routes.register(t,arguments[1]),this;for(var e in t)Routes.register(e,t[e]);return this},promise:function(t){for(var e=t.split("."),n=global;e.length;){var r=e.shift();n=n[r]||(n[r]={})}return n},register:function(t){for(var e in t)for(var n=0;t[e].length>n;n++){var r=t[e][n].id,i=t[e][n].url,o=t[e][n].namespace,u=new Resource;switch(i&&("/"===i[0]&&(i=i.substring(1)),u.location=path_getDir(i)),u.state=4,u.namespace=o,u.type=e,u.url=i||r,e){case"load":case"lazy":var s=document.querySelector("#includejs-"+r.replace(/\W/g,""));if(null==s){console.error('"%s" Data was not embedded into html',r);break}u.exports=s.innerHTML,CustomLoader.exists(u)&&(u.state=3,CustomLoader.load(u,function(t,e){t.exports=e,t.readystatechanged(4)}))}(bin[e]||(bin[e]={}))[r]=u}},instance:function(t){var e;return null==t?(e=new Include,e.state=4,e):(e=new Resource,e.state=4,e.location=path_getDir(t),e)},getResource:function(t,e){var n=t;if(47!==t.charCodeAt(0)&&(n="/"+n),null!=e)return bin[e][n];for(var r in bin)if(bin[r].hasOwnProperty(n))return bin[r][n];return null},getResources:function(){return bin},plugin:function(t,e){var n=[],r=0,i=0,o=0,u=function(t,n){i++,embedPlugin(n),i===r-1&&e&&(e(),e=null)};for(Routes.each("",t,function(t,e){n.push("/"===e.path[0]?e.path.substring(1):e.path)}),r=n.length;r>o;o++)XHR(n[o],u);return this},client:function(){return cfg.server===!0&&stub_freeze(this),this},server:function(){return cfg.server!==!0&&stub_freeze(this),this},pauseStack:ScriptStack.pause,resumeStack:ScriptStack.resume,allDone:ScriptStack.complete}),Include}(IncludeDeferred),CustomLoader=function(){function t(t){return"string"==typeof t?!1:"function"==typeof t.ready||"function"==typeof t.process}function e(e){var n=path_getExtension(e),r=cfg.loader[n];if(t(r))return r;var i,o=r;if("object"==typeof o)for(var u in o){i=u,o=o[u];break}return cfg.loader[n]=new Resource("js",Routes.resolve(i,o),i)}function n(t,e){return function(n){t(e,n)}}function r(t,e,r,i){var o=n(i,e),u=r.process(t,e,o);u!==void 0&&i(e,u)}function i(t,e,n){return"string"==typeof t.exports?(r(t.exports,t,e,n),void 0):(XHR(t,function(t,i){r(i,t,e,n)}),void 0)}var o={process:function(t){try{return JSON.parse(t)}catch(e){return console.error(e,t),null}}};return cfg.loader={json:o},{load:function(t,n){var r=e(t.url);return r.process?(i(t,r,n),void 0):(r.done(function(){i(t,r.exports,n)}),void 0)},exists:function(t){if(!t.url)return!1;var e=path_getExtension(t.url);return cfg.loader.hasOwnProperty(e)},register:function(t,e){if("string"==typeof e){var n=include;null==n.location&&(n={location:path_getDir(path_resolveCurrent())}),e=path_resolveUrl(e,n)}cfg.loader[t]=e}}}(),LazyModule={create:function(t,e){for(var n=t.split("."),r=global,i=n[n.length-1];n.length>1;){var o=n.shift();r=r[o]||(r[o]={})}n=null,Object.defineProperty(r,i,{get:function(){delete r[i];try{var n=__eval(e,global.include);null==n||n instanceof Resource||(r[i]=n)}catch(o){o.xpath=t,Helper.reportError(o)}finally{return e=null,t=null,r[i]}}})}},Resource=function(t,e,n,r){function i(t){var e=t.type,i=t.parent,u=t.url;if(null==document&&"css"===e)return t.state=4,t;if(r.exists(t)===!1)switch(e){case"js":case"embed":n.load(t,i,"embed"===e);break;case"ajax":case"load":case"lazy":XHR(t,o);break;case"css":t.state=4;var s=document.createElement("link");s.href=u,s.rel="stylesheet",s.type="text/css",document.getElementsByTagName("head")[0].appendChild(s)}else r.load(t,o);return t}function o(t,e){switch(e||console.warn("Resource cannt be loaded",t.url),t.type){case"js":case"embed":return t.source=e,n.load(t,t.parent,"embed"===t.type),void 0;case"load":case"ajax":t.exports=e;break;case"lazy":LazyModule.create(t.xpath,e);break;case"css":var r=document.createElement("style");r.type="text/css",r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r)}t.readystatechanged(4)}function u(t,e,n){if(null==t)return null;null==n&&(n=[]);for(var r,i=0,o=t.length;o>i;i++)r=t[i].resource,e===r.type&&n.push(r),null!=r.includes&&u(r.includes,e,n);return n}var s=function(e,r,o,u,s,l){t.call(this),this.childLoaded=fn_proxy(this.childLoaded,this);var a=r&&r.path;null!=a&&(this.url=a=path_resolveUrl(a,s)),this.route=r,this.namespace=o,this.type=e,this.xpath=u,this.parent=s,null==l&&a&&(l=("/"===a[0]?"":"/")+a);var c=bin[e]&&bin[e][l];return c?(4>c.state&&"js"===e&&n.moveToParent(c,s),c):null==a?(this.state=3,this.location=path_getDir(path_resolveCurrent()),this):(this.state=0,this.location=path_getDir(a),(bin[e]||(bin[e]={}))[l]=this,cfg.version&&(this.url+=(-1===this.url.indexOf("?")?"?":"&")+"v="+cfg.version),i(this))};return s.prototype=obj_inherit(s,t,{childLoaded:function(){var t=this,e=t.includes;if(e&&e.length){if(3>t.state)return;for(var n=0;e.length>n;n++)if(4!==e[n].resource.state)return}t.readystatechanged(4)},create:function(t,e,n,r,i){var o;return this.state=this.state>=3?3:2,this.response=null,null==this.includes&&(this.includes=[]),o=new s(t,e,n,r,this,i),this.includes.push({resource:o,route:e}),o},include:function(t,n){var r=this;return e.each(t,n,function(e,n,i){(null==r.route||r.route.path!==n.path)&&r.create(t,n,e,i).on(4,r.childLoaded)}),this},getNestedOfType:function(t){return u(this.includes,t)}}),s}(Include,Routes,ScriptStack,CustomLoader);exports.include=new Include,exports.includeLib={Routes:RoutesLib,Resource:Resource,ScriptStack:ScriptStack,registerLoader:CustomLoader.register},function(){function t(t){return t=t.replace("file://","").replace(/\\/g,"/").replace(/\?[^\n]+$/,""),/^\/\w+:\/[^\/]/i.test(t)?t.substring(1):t}function e(t){return t.substring(0,t.lastIndexOf("/"))}function n(t){var e;return function(){e&&clearTimeout(e),e=setTimeout(function(){var e;"object"==typeof cfg.autoreload&&(e=function(e){e!==!1&&cfg.autoreload.fileChanged(t,"include")}),o(t,e)},150)}}function r(t){if(null!=t){var e,n,i,o,u="string"==typeof t,s=u?t:t.url;for(e in bin)for(n in bin[e])if(o=bin[e][n],u!==!1){if(i=n.indexOf(s),-1!==i&&i===n.length-s.length)return delete bin[e][n],"load"===e?r(o.parent):o}else if(o===t)return delete bin[e][n],o;console.warn("<include:res:remove> Resource is not in cache",s)}}function i(t){if(null!=t){t.content=null,t.exports=null;var e=t.parent;return e.create(t.type,t.route,t.namespace,t.xpath).on(4,e.childLoaded)}}function o(t,e){var n=r(t);return null==n?(e&&e(!1),void 0):i(n).done(e)}cfg.server=!0;var u,s,l,a=require("vm"),c=(global.module||module).constructor;(function(){function t(t){null!=n[t]&&(n[t].close(),n[t]=null)}var e=require("fs"),n={};s=function(t,n){if(cfg.sync)try{var r=e.readFileSync(t,"utf8");n(null,r)}catch(i){console.error("File Read - ",i)}else e.readFile(t,"utf8",n)},l=function(r,i){t(r),n[r]=e.watch(r,i)}})(),XMLHttpRequest=function(){},XMLHttpRequest.prototype={constructor:XMLHttpRequest,open:function(t,e){this.url=e},send:function(){-1!==this.url.indexOf("file://")&&(this.url=t(this.url));var e=this;s(this.url,function(t,r){t&&(console.error(">>",t.code,t.path),r=""),e.readyState=4,e.responseText=r,e.onreadystatechange(),null==t&&cfg.autoreload&&l(e.url,n(e.url))})}},__eval=function(n,r,i){module.exports={},global.include=r,global.require=require,global.exports=module.exports,global.__filename=t(r.url),global.__dirname=e(global.__filename),global.module=module,i!==!0&&(n="(function(){ "+n+"\n}())");try{a.runInThisContext(n,global.__filename)}catch(o){console.error("Module Evaluation Error",r.url),console.error(o.stack)}if(null==r.exports){var u=module.exports;("object"!=typeof u||Object.keys(u).length)&&(r.exports=module.exports)}},obj_inherit(Resource,{bin_remove:r,bin_tryReload:o,path_getFile:function(){return t(this.url)},path_getDir:function(){return e(t(this.url))},inject:function(){var t=1===arguments.length?arguments[0]:__array_slice.call(arguments),e=this;e.state=e.state>=3?3:2;var n=e.create();return n.url=this.url,n.location=this.location,n.load(t).done(function(t){var r,i;t.load;try{for(var o=0;n.includes.length>o;o++){var i=n.includes[o].resource,u=i.exports;i.exports=null,i.type="js",i.includes=null,i.state=3;for(var r in bin.load)if(bin.load[r]===i){delete bin.load[r];break}__eval(u,i,!0),i.readystatechanged(3)}}catch(s){console.error("Injected Script Error\n",s,r)}n.on(4,function(){e.includes.splice.apply(e.includes,[n,1].concat(n.includes)),e.readystatechanged(3)})}),e},instance:function(n){if("string"==typeof n){var r=module,i=new c(n,r);if(i.filename=t(n),i.paths=c._nodeModulePaths(e(i.filename)),!a){var o="win32"===process.platform?";":":",s=process.env.PATH||process.env.path;s||console.error("PATH not defined in env",process.env);var l=s.split(o),a=ruqq.arr.first(l,function(t){return/([\\\/]npm[\\\/])|([\\\/]npm$)/gi.test(t)});a?(a=a.replace(/\\/g,"/"),a+=("/"!==a[a.length-1]?"/":"")+"node_modules",u=io.env.applicationDir.toLocalDir()+"node_modules"):(console.error("Could not resolve global NPM Directory from system path"),console.log("searched with pattern /npm in",s,o))}i.paths.unshift(u),i.paths.unshift(a),module=i,require=i.require.bind(i)}var f=new Resource;return f.state=4,f}}),obj_inherit(Include,{bin_tryReload:o,bin_remove:r})}()});